<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.2" />
<title>dataanalyzer.utilities.data_conversion API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>dataanalyzer.utilities.data_conversion</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python"># Author: Malthe Asmus Marciniak Nielsen

import json
from typing import Optional, Tuple, Union

import numpy as np

from dataanalyzer.utilities.valueclass import Valueclass


####################################################################################################
#                   From Valueclass to Dict                                                        #
####################################################################################################
def valueclass2dict(
    *value: Union[Valueclass, list, tuple, dict], split_complex=True
) -&gt; dict:
    &#34;&#34;&#34;Converts a Valueclass object to a dict.

    Args:
        value (Valueclass): The value to be converted.

    Returns:
        dict: The converted value.
    &#34;&#34;&#34;
    # Create an empty dictionary
    valuedict = {}

    # Loop over all values
    for v in value:
        # If the value is a Valueclass object, convert it to a dict and add it to the dictionary
        if isinstance(v, Valueclass):
            valuedict[v.name] = v.todict(split_complex=split_complex)

        # If the value is a list or tuple, convert each element to a dict and add it to the dictionary
        elif isinstance(v, (list, tuple)):
            valuedict |= _valueclass2dict_list(v)

        # If the value is a dict, convert each element to a dict and add it to the dictionary
        elif isinstance(v, dict):
            valuedict |= _valueclass2dict_dict(v)

        # If the value is a int, float, str, bool, add it to the dictionary
        elif isinstance(v, (int, float, str, bool)):
            valuedict = v

        # If the value is not of one of the above types, raise an error
        else:
            raise TypeError(f&#34;Valueclass2dict does not accept type {type(v)}.&#34;)
    return valuedict


def _valueclass2dict_list(value: Union[list, tuple]) -&gt; dict:
    &#34;&#34;&#34;Converts a list to a dict.

    Args:
        value (list): The list to be converted.

    Returns:
        dict: The converted list.
    &#34;&#34;&#34;
    valuedict = {}
    for vi in value:
        valuedict |= valueclass2dict(vi)
    return valuedict


def _valueclass2dict_dict(value: dict) -&gt; dict:
    &#34;&#34;&#34;Converts a dict to a dict.

    Args:
        value (dict): The dict to be converted.

    Returns:
        dict: The converted dict.
    &#34;&#34;&#34;
    valuedict = {}
    if &#34;name&#34; in value and &#34;value&#34; in value:
        v_valueclass = Valueclass.fromdict(value)
        valuedict[v_valueclass.name] = v_valueclass
    else:
        for ki, vi in value.items():
            valuedict[ki] = valueclass2dict(vi)
    return valuedict


####################################################################################################
#                   From Dict to Valueclass                                                        #
####################################################################################################
def dict2valueclass(*value: dict) -&gt; list[Valueclass]:
    &#34;&#34;&#34;Converts a dict to a Valueclass object.

    Args:
        value (dict): The value to be converted.

    Returns:
        Valueclass: The converted value.
    &#34;&#34;&#34;
    valuelist = []

    # Loop through each value
    for v in value:
        # If v is a dict
        if isinstance(v, dict):
            # Check if the dict has the keys &#34;name&#34; and &#34;value&#34;
            if &#34;name&#34; in v and &#34;value&#34; in v:
                # If so, convert the dict to a Valueclass object
                valuelist.append(Valueclass.fromdict(v))
            # If not, check if the dict contains other dicts
            else:
                # If so, convert each dict to a Valueclass object
                valuelist.extend(dict2valueclass(vi) for vi in v.values())

    return valuelist


####################################################################################################
#                   From Valueclass to Json                                                        #
####################################################################################################
def valueclass2json(
    parameters: Union[Valueclass, list, tuple, dict],
    results: Union[Valueclass, list, tuple, dict],
    path: str,
) -&gt; None:
    &#34;&#34;&#34;Converts a Valueclass object to a json string.

    Args:
        parameters (Union[Valueclass, list, tuple, dict]): The parameters to be converted.
        results (Union[Valueclass, list, tuple, dict]): The results to be converted.
        path (str): The path to the json file.
    &#34;&#34;&#34;

    # Convert the parameters and results to a dictionary.
    settings_dict = valueclass2dict(parameters, split_complex=True)
    result_dict = valueclass2dict(results, split_complex=True)

    # Create a dictionary with the experiment settings and results.
    jsondict = {&#34;experiment_settings&#34;: settings_dict, &#34;experiment_results&#34;: result_dict}

    # Add the dictionary to the json file.
    with open(path, &#34;r+&#34;) as file:
        try:
            json_dict = json.load(file)
        except json.decoder.JSONDecodeError:
            json_dict = {}
        json_dict |= jsondict
        file.seek(0)
        json.dump(json_dict, file, indent=4)


####################################################################################################
#                   From Json to Valueclass                                                        #
####################################################################################################
def json2valueclass(
    json_path: str, insepct: bool = False
) -&gt; Tuple[list[Valueclass], list[Valueclass]]:
    &#34;&#34;&#34;Converts a json file to a Valueclass object.

    Args:
        json_path (str): The path to the json file.
        insepct (bool, optional): If True, the parameters and results are printed. Defaults to False.

    Returns:
        Tuple[list[Valueclass], list[Valueclass]]: _description_
    &#34;&#34;&#34;

    # Open the json file
    with open(json_path, &#34;r&#34;) as f:
        data_dict = json.load(f)

    # Get the parameters and results
    parameters, results = _get_parameters_and_results_from_dict(data_dict)

    # Inspect the results if insepct is True
    _print_parameters_and_results(
        parameters, results, insepct=insepct, file_type=&#34;Json&#34;
    )
    return parameters, results


def _get_parameters_and_results_from_dict(
    data_dict: dict,
) -&gt; Tuple[list[Valueclass], list[Valueclass]]:
    &#34;&#34;&#34;Get the parameters and results from the json file.

    Args:
        data_dict (dict): The dictionary containing the parameters and results.

    Returns:
        Tuple[list[Valueclass], list[Valueclass]]: The parameters and results.
    &#34;&#34;&#34;
    # Get the parameters from the data_dict
    parameters = [
        Valueclass.fromdict(value)
        for value in data_dict[&#34;experiment_settings&#34;].values()
    ]
    # Get the results from the data_dict
    results = [
        Valueclass.fromdict(value) for value in data_dict[&#34;experiment_results&#34;].values()
    ]
    return parameters, results


####################################################################################################
#                   From Valueclass to Labber                                                      #
####################################################################################################
def valueclass2labber(
    parameters: list[Valueclass], results: list[Valueclass], output_path: str
) -&gt; str:
    &#34;&#34;&#34;Converts a Valueclass object to a Labber file.

    Args:
        parameters (list[Valueclass]): Valueclass parameters.
        results (list[Valueclass]): Valueclass results.
        output_path (str): The path to the Labber file.

    Returns:
        str: The path to the Labber file.
    &#34;&#34;&#34;
    # Create the Labber dictionaries
    logStep, logLog = _make_labber_dict(parameters, results)

    # Create the Labber file and return the path
    return _make_inital_Labber_file(output_path, logLog, logStep)


def _make_labber_dict(
    parameters: list[Valueclass], results: list[Valueclass]
) -&gt; Tuple[list[dict], list[dict]]:
    &#34;&#34;&#34;Make Labber logStep and logLog dictionaries.

    Args:
        parameters (list[Valueclass]): Labber parameters.
        results (list[Valueclass]): Labber results.

    Returns:
        Tuple[list[dict], list[dict]]: Labber logStep and logLog dictionaries.
    &#34;&#34;&#34;
    # Create a list of dictionaries for the step data
    logStep = [
        dict(name=data.name, unit=data.unit, values=data.value.tolist())
        for data in parameters
    ]

    # Create a list of dictionaries for the log data
    logLog = [
        dict(
            name=data.name,
            unit=data.unit,
            values=data.value.tolist(),
            vector=False,
            complex=True,
        )
        for data in results
    ]

    # Return the step and log data
    return logStep, logLog


def _make_inital_Labber_file(path: str, logLog: list[dict], logStep: list[dict]) -&gt; str:
    &#34;&#34;&#34;Make the initial Labber file.

    Args:
        path (str): The path to the Labber file.
        logLog (list[dict]): List of dictionaries containing the log data.
        logStep (list[dict]): List of dictionaries containing the step data.

    Returns:
        str: The path to the Labber file.
    &#34;&#34;&#34;
    # Create the Labber file
    import Labber

    f = Labber.createLogFile_ForData(path, logLog, logStep)

    # Add the data to the Labber file for each step
    for i in range(len(logStep[-1][&#34;values&#34;])):
        # Create a dictionary with the data
        data = {Log[&#34;name&#34;]: np.array(Log[&#34;values&#34;])[i].T for Log in logLog}
        f.addEntry(data)

    # Close the Labber file and return the path
    return f.getFilePath(&#34;&#34;)


####################################################################################################
#                   From Labber to Valueclass                                                      #
####################################################################################################
def labber2valueclass(
    labber_path: str, insepct: bool = False
) -&gt; Tuple[list[Valueclass], list[Valueclass]]:
    &#34;&#34;&#34;Converts a Labber file to a Valueclass object.

    Args:
        labber_path (str): The path to the Labber file.
        insepct (bool, optional): If True, the parameters and results are printed. Defaults to False.

    Returns:
        Tuple[list[Valueclass], list[Valueclass]]: The parameters and results.
    &#34;&#34;&#34;
    # Open Labber file
    import Labber

    f = Labber.LogFile(labber_path)

    # Get parameters and results
    parameters = _get_parameters(f)
    results = _get_results(f)

    # Inspect the results if insepct is True
    _print_parameters_and_results(
        parameters, results, insepct=insepct, file_type=&#34;Labber&#34;
    )

    return parameters, results


def _get_vna_data(step_channels, channels) -&gt; list[Valueclass]:
    &#34;&#34;&#34;Calculate the frequencies for the VNA measurement.

    The VNA measurement can be performed in three ways:
    - Specify start and stop frequency
    - Specify center frequency and span
    - Specify the number of points (the start and stop frequency will be calculated)

    Args:
        step_channels (list): The channels in the step
        channels (dict): The channels in the experiment

    Returns:
        list: A list of Valueclass objects
    &#34;&#34;&#34;
    start_freq = stop_freq = center_freq = span = n_points = None

    # Find the start and stop frequency
    for param in step_channels:
        if &#34;VNA&#34; in param[&#34;name&#34;]:
            if &#34;Start frequency&#34; in param:
                start_freq = param[&#34;values&#34;]
            elif &#34;Stop frequency&#34; in param:
                stop_freq = param[&#34;values&#34;]

    # Find the number of points, center frequency and span
    for param, value in channels.items():
        if &#34;VNA&#34; in param:
            if &#34;# of points&#34; in param:
                n_points = value

            elif start_freq is None or stop_freq is None:
                if &#34;Center frequency&#34; in param:
                    center_freq = value
                elif &#34;Span&#34; in param:
                    span = value

    # Calculate the start and stop frequency if center frequency and span is specified
    if center_freq is not None and span is not None:
        start_freq = center_freq - span / 2
        stop_freq = center_freq + span / 2

    # Calculate the frequencies if start and stop frequency is specified
    if start_freq is not None and stop_freq is not None and n_points is not None:
        values = np.linspace(float(start_freq), float(stop_freq), int(n_points))
        return [
            Valueclass(
                name=&#34;VNA - Frequency&#34;,
                value=values,
                unit=&#34;Hz&#34;,
            )
        ]
    return []


def _get_parameters(logfile) -&gt; list[Valueclass]:
    &#34;&#34;&#34;Get the parameters from the Labber file.

    Args:
        logfile (Labber.LogFile): The Labber file.

    Returns:
        list[Valueclass]: A list of Valueclass objects.
    &#34;&#34;&#34;
    # Get step channels and channel values as a dictionary
    step_channels = logfile.getStepChannels()
    channels = logfile.getChannelValuesAsDict()

    # Get the VNA data
    parameters = _get_vna_data(step_channels, channels)

    # Add all step channels that have more than one value
    parameters += [
        Valueclass(name=step[&#34;name&#34;], value=step[&#34;values&#34;], unit=step[&#34;unit&#34;])
        for step in step_channels
        if len(step[&#34;values&#34;]) &gt; 1
    ]
    return parameters


def _get_results(logfile) -&gt; list[Valueclass]:
    &#34;&#34;&#34;Get the results from the Labber file.

    Args:
        logfile (Labber.LogFile): The Labber file.

    Returns:
        list[Valueclass]: A list of Valueclass objects.
    &#34;&#34;&#34;
    results = []

    # Get the log channels
    log_channels = logfile.getLogChannels()

    # Get the data for each log channel
    for i, log_channel in enumerate(log_channels):
        # Get the data from the Labber file
        data = logfile.getData(i)
        # Create a Valueclass object for each log channel
        results.append(
            Valueclass(
                name=log_channel[&#34;name&#34;],
                value=data[0] if len(data) &lt; 2 else data,
                unit=log_channel[&#34;unit&#34;],
            )
        )
    return results


####################################################################################################
#                   From Json to Labber                                                            #
####################################################################################################
def json2labber(json_path: str, output_path: Optional[str] = None) -&gt; str:
    &#34;&#34;&#34;Converts a Json file to a Labber file.

    Args:
        json_path (str): The path to the Json file.
        output_path (Optional[str], optional): The path to the Labber file.
        If None, the path is set to the same as the Json file. Defaults to None.

    Returns:
        str: The path to the Labber file.
    &#34;&#34;&#34;
    # If the output path is not specified, set it to the same as the Json file
    if output_path is None:
        output_path = json_path.replace(&#34;.json&#34;, &#34;.hdf5&#34;)

    # Get the parameters and result from the Json file
    parameters, result = json2valueclass(json_path)

    # Convert the parameters and result to a Labber file
    return valueclass2labber(parameters, result, output_path)


####################################################################################################
#                   From Labber to Json                                                            #
####################################################################################################
def labber2json(labber_path: str, output_path: Optional[str] = None) -&gt; str:
    &#34;&#34;&#34;Converts a Labber file to a Json file.

    Args:
        labber_path (str): The path to the Labber file.
        output_path (Optional[str], optional): The path to the Json file. If None, the path is set to the same as the Labber file. Defaults to None.

    Returns:
        str: The path to the Json file.
    &#34;&#34;&#34;
    # Set the output path if not given
    if output_path is None:
        output_path = labber_path.replace(&#34;.hdf5&#34;, &#34;.json&#34;)

    # Get the data and parameters
    parameters, result = labber2valueclass(labber_path)

    # Convert the data and parameters to a Json file
    valueclass2json(parameters, result, output_path)
    return output_path


####################################################################################################
#                   Other functions                                                                #
####################################################################################################
def _print_parameters_and_results(
    parameters: list[Valueclass],
    results: list[Valueclass],
    insepct: bool,
    file_type: str,
) -&gt; None:
    &#34;&#34;&#34;Prints the parameters and results to the console.

    Args:
        parameters (list[Valueclass]): list of Valueclass objects containing the parameters
        results (list[Valueclass]): list of Valueclass objects containing the results
        insepct (bool): If True, the parameters and results are printed to the console
        file_type (str): The type of file, e.g. Labber or Json
    &#34;&#34;&#34;
    if insepct:
        # Print the parameters and results to the console
        print(f&#34;Insepcting {file_type} File...&#34;)
        print_values_from_list(&#34;parameters&#34;, parameters)
        print_values_from_list(&#34;results&#34;, results)


def print_values_from_list(name: str, value_list: list[Valueclass]) -&gt; None:
    &#34;&#34;&#34;Prints the values from a list of Valueclass objects to the console.

    Args:
        name (str): The name of the list of Valueclass objects (e.g. parameters or results)
        value_list (list[Valueclass]): The list of Valueclass objects
    &#34;&#34;&#34;
    # Print the values from the list in a nice format to the console
    print(f&#34;File is containing {len(value_list)} {name}:&#34;)
    # Loop over all values in the list
    for value in value_list:
        # Print the name of the value
        print(f&#34;\t{value.name}&#34;)


if __name__ == &#34;__main__&#34;:

    class test_conversion:
        def __init__(self) -&gt; None:
            self.v1 = Valueclass(name=&#34;test1&#34;, value=1, unit=&#34;V&#34;)
            self.v2 = Valueclass(name=&#34;test2&#34;, value=[1, 2, 3], unit=&#34;V&#34;)
            self.v3 = Valueclass(name=&#34;test3&#34;, value=[1 + 1j, 2 + 2j, 3 + 3j], unit=&#34;V&#34;)

            self.d1 = {&#34;name&#34;: &#34;test1&#34;, &#34;value&#34;: 1, &#34;unit&#34;: &#34;V&#34;}

        def run_tests(self):
            self.test_valueclass2dict()
            self.test_dict2valueclass()

        def test_valueclass2dict(self):
            assert valueclass2dict(self.v1) == {self.v1.name: self.v1.todict()}
            assert valueclass2dict(self.v2) == {self.v2.name: self.v2.todict()}

            assert valueclass2dict([self.v1, self.v2]) == {
                self.v1.name: self.v1.todict(),
                self.v2.name: self.v2.todict(),
            }
            assert valueclass2dict({&#34;test&#34;: [self.v1, self.v2]}) == {
                &#34;test&#34;: {self.v1.name: self.v1.todict(), self.v2.name: self.v2.todict()}
            }
            assert valueclass2dict({&#34;test&#34;: self.v1}, self.v2) == {
                &#34;test&#34;: {self.v1.name: self.v1.todict()},
                self.v2.name: self.v2.todict(),
            }

        def test_dict2valueclass(self):
            d1_value = dict2valueclass(self.d1)[0]
            assert d1_value.name == self.d1[&#34;name&#34;]
            assert d1_value.value == np.array(self.d1[&#34;value&#34;])
            assert d1_value.unit == self.d1[&#34;unit&#34;]

        def test_valueclass2json(self):
            pass

        def test_valueclass2labber(self):
            pass

    test_conversion().run_tests()</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="dataanalyzer.utilities.data_conversion.dict2valueclass"><code class="name flex">
<span>def <span class="ident">dict2valueclass</span></span>(<span>*value: dict) ‑> list[<a title="dataanalyzer.utilities.valueclass.Valueclass" href="valueclass.html#dataanalyzer.utilities.valueclass.Valueclass">Valueclass</a>]</span>
</code></dt>
<dd>
<div class="desc"><p>Converts a dict to a Valueclass object.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>value</code></strong> :&ensp;<code>dict</code></dt>
<dd>The value to be converted.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>Valueclass</code></dt>
<dd>The converted value.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def dict2valueclass(*value: dict) -&gt; list[Valueclass]:
    &#34;&#34;&#34;Converts a dict to a Valueclass object.

    Args:
        value (dict): The value to be converted.

    Returns:
        Valueclass: The converted value.
    &#34;&#34;&#34;
    valuelist = []

    # Loop through each value
    for v in value:
        # If v is a dict
        if isinstance(v, dict):
            # Check if the dict has the keys &#34;name&#34; and &#34;value&#34;
            if &#34;name&#34; in v and &#34;value&#34; in v:
                # If so, convert the dict to a Valueclass object
                valuelist.append(Valueclass.fromdict(v))
            # If not, check if the dict contains other dicts
            else:
                # If so, convert each dict to a Valueclass object
                valuelist.extend(dict2valueclass(vi) for vi in v.values())

    return valuelist</code></pre>
</details>
</dd>
<dt id="dataanalyzer.utilities.data_conversion.json2labber"><code class="name flex">
<span>def <span class="ident">json2labber</span></span>(<span>json_path: str, output_path: Optional[str] = None) ‑> str</span>
</code></dt>
<dd>
<div class="desc"><p>Converts a Json file to a Labber file.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>json_path</code></strong> :&ensp;<code>str</code></dt>
<dd>The path to the Json file.</dd>
<dt><strong><code>output_path</code></strong> :&ensp;<code>Optional[str]</code>, optional</dt>
<dd>The path to the Labber file.</dd>
</dl>
<p>If None, the path is set to the same as the Json file. Defaults to None.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>str</code></dt>
<dd>The path to the Labber file.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def json2labber(json_path: str, output_path: Optional[str] = None) -&gt; str:
    &#34;&#34;&#34;Converts a Json file to a Labber file.

    Args:
        json_path (str): The path to the Json file.
        output_path (Optional[str], optional): The path to the Labber file.
        If None, the path is set to the same as the Json file. Defaults to None.

    Returns:
        str: The path to the Labber file.
    &#34;&#34;&#34;
    # If the output path is not specified, set it to the same as the Json file
    if output_path is None:
        output_path = json_path.replace(&#34;.json&#34;, &#34;.hdf5&#34;)

    # Get the parameters and result from the Json file
    parameters, result = json2valueclass(json_path)

    # Convert the parameters and result to a Labber file
    return valueclass2labber(parameters, result, output_path)</code></pre>
</details>
</dd>
<dt id="dataanalyzer.utilities.data_conversion.json2valueclass"><code class="name flex">
<span>def <span class="ident">json2valueclass</span></span>(<span>json_path: str, insepct: bool = False) ‑> Tuple[list[<a title="dataanalyzer.utilities.valueclass.Valueclass" href="valueclass.html#dataanalyzer.utilities.valueclass.Valueclass">Valueclass</a>], list[<a title="dataanalyzer.utilities.valueclass.Valueclass" href="valueclass.html#dataanalyzer.utilities.valueclass.Valueclass">Valueclass</a>]]</span>
</code></dt>
<dd>
<div class="desc"><p>Converts a json file to a Valueclass object.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>json_path</code></strong> :&ensp;<code>str</code></dt>
<dd>The path to the json file.</dd>
<dt><strong><code>insepct</code></strong> :&ensp;<code>bool</code>, optional</dt>
<dd>If True, the parameters and results are printed. Defaults to False.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>Tuple[list[Valueclass], list[Valueclass]]</code></dt>
<dd><em>description</em></dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def json2valueclass(
    json_path: str, insepct: bool = False
) -&gt; Tuple[list[Valueclass], list[Valueclass]]:
    &#34;&#34;&#34;Converts a json file to a Valueclass object.

    Args:
        json_path (str): The path to the json file.
        insepct (bool, optional): If True, the parameters and results are printed. Defaults to False.

    Returns:
        Tuple[list[Valueclass], list[Valueclass]]: _description_
    &#34;&#34;&#34;

    # Open the json file
    with open(json_path, &#34;r&#34;) as f:
        data_dict = json.load(f)

    # Get the parameters and results
    parameters, results = _get_parameters_and_results_from_dict(data_dict)

    # Inspect the results if insepct is True
    _print_parameters_and_results(
        parameters, results, insepct=insepct, file_type=&#34;Json&#34;
    )
    return parameters, results</code></pre>
</details>
</dd>
<dt id="dataanalyzer.utilities.data_conversion.labber2json"><code class="name flex">
<span>def <span class="ident">labber2json</span></span>(<span>labber_path: str, output_path: Optional[str] = None) ‑> str</span>
</code></dt>
<dd>
<div class="desc"><p>Converts a Labber file to a Json file.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>labber_path</code></strong> :&ensp;<code>str</code></dt>
<dd>The path to the Labber file.</dd>
<dt><strong><code>output_path</code></strong> :&ensp;<code>Optional[str]</code>, optional</dt>
<dd>The path to the Json file. If None, the path is set to the same as the Labber file. Defaults to None.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>str</code></dt>
<dd>The path to the Json file.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def labber2json(labber_path: str, output_path: Optional[str] = None) -&gt; str:
    &#34;&#34;&#34;Converts a Labber file to a Json file.

    Args:
        labber_path (str): The path to the Labber file.
        output_path (Optional[str], optional): The path to the Json file. If None, the path is set to the same as the Labber file. Defaults to None.

    Returns:
        str: The path to the Json file.
    &#34;&#34;&#34;
    # Set the output path if not given
    if output_path is None:
        output_path = labber_path.replace(&#34;.hdf5&#34;, &#34;.json&#34;)

    # Get the data and parameters
    parameters, result = labber2valueclass(labber_path)

    # Convert the data and parameters to a Json file
    valueclass2json(parameters, result, output_path)
    return output_path</code></pre>
</details>
</dd>
<dt id="dataanalyzer.utilities.data_conversion.labber2valueclass"><code class="name flex">
<span>def <span class="ident">labber2valueclass</span></span>(<span>labber_path: str, insepct: bool = False) ‑> Tuple[list[<a title="dataanalyzer.utilities.valueclass.Valueclass" href="valueclass.html#dataanalyzer.utilities.valueclass.Valueclass">Valueclass</a>], list[<a title="dataanalyzer.utilities.valueclass.Valueclass" href="valueclass.html#dataanalyzer.utilities.valueclass.Valueclass">Valueclass</a>]]</span>
</code></dt>
<dd>
<div class="desc"><p>Converts a Labber file to a Valueclass object.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>labber_path</code></strong> :&ensp;<code>str</code></dt>
<dd>The path to the Labber file.</dd>
<dt><strong><code>insepct</code></strong> :&ensp;<code>bool</code>, optional</dt>
<dd>If True, the parameters and results are printed. Defaults to False.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>Tuple[list[Valueclass], list[Valueclass]]</code></dt>
<dd>The parameters and results.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def labber2valueclass(
    labber_path: str, insepct: bool = False
) -&gt; Tuple[list[Valueclass], list[Valueclass]]:
    &#34;&#34;&#34;Converts a Labber file to a Valueclass object.

    Args:
        labber_path (str): The path to the Labber file.
        insepct (bool, optional): If True, the parameters and results are printed. Defaults to False.

    Returns:
        Tuple[list[Valueclass], list[Valueclass]]: The parameters and results.
    &#34;&#34;&#34;
    # Open Labber file
    import Labber

    f = Labber.LogFile(labber_path)

    # Get parameters and results
    parameters = _get_parameters(f)
    results = _get_results(f)

    # Inspect the results if insepct is True
    _print_parameters_and_results(
        parameters, results, insepct=insepct, file_type=&#34;Labber&#34;
    )

    return parameters, results</code></pre>
</details>
</dd>
<dt id="dataanalyzer.utilities.data_conversion.print_values_from_list"><code class="name flex">
<span>def <span class="ident">print_values_from_list</span></span>(<span>name: str, value_list: list[<a title="dataanalyzer.utilities.valueclass.Valueclass" href="valueclass.html#dataanalyzer.utilities.valueclass.Valueclass">Valueclass</a>]) ‑> NoneType</span>
</code></dt>
<dd>
<div class="desc"><p>Prints the values from a list of Valueclass objects to the console.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>name</code></strong> :&ensp;<code>str</code></dt>
<dd>The name of the list of Valueclass objects (e.g. parameters or results)</dd>
<dt><strong><code>value_list</code></strong> :&ensp;<code>list[Valueclass]</code></dt>
<dd>The list of Valueclass objects</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def print_values_from_list(name: str, value_list: list[Valueclass]) -&gt; None:
    &#34;&#34;&#34;Prints the values from a list of Valueclass objects to the console.

    Args:
        name (str): The name of the list of Valueclass objects (e.g. parameters or results)
        value_list (list[Valueclass]): The list of Valueclass objects
    &#34;&#34;&#34;
    # Print the values from the list in a nice format to the console
    print(f&#34;File is containing {len(value_list)} {name}:&#34;)
    # Loop over all values in the list
    for value in value_list:
        # Print the name of the value
        print(f&#34;\t{value.name}&#34;)</code></pre>
</details>
</dd>
<dt id="dataanalyzer.utilities.data_conversion.valueclass2dict"><code class="name flex">
<span>def <span class="ident">valueclass2dict</span></span>(<span>*value: Union[<a title="dataanalyzer.utilities.valueclass.Valueclass" href="valueclass.html#dataanalyzer.utilities.valueclass.Valueclass">Valueclass</a>, list, tuple, dict], split_complex=True) ‑> dict</span>
</code></dt>
<dd>
<div class="desc"><p>Converts a Valueclass object to a dict.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>value</code></strong> :&ensp;<code>Valueclass</code></dt>
<dd>The value to be converted.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>The converted value.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def valueclass2dict(
    *value: Union[Valueclass, list, tuple, dict], split_complex=True
) -&gt; dict:
    &#34;&#34;&#34;Converts a Valueclass object to a dict.

    Args:
        value (Valueclass): The value to be converted.

    Returns:
        dict: The converted value.
    &#34;&#34;&#34;
    # Create an empty dictionary
    valuedict = {}

    # Loop over all values
    for v in value:
        # If the value is a Valueclass object, convert it to a dict and add it to the dictionary
        if isinstance(v, Valueclass):
            valuedict[v.name] = v.todict(split_complex=split_complex)

        # If the value is a list or tuple, convert each element to a dict and add it to the dictionary
        elif isinstance(v, (list, tuple)):
            valuedict |= _valueclass2dict_list(v)

        # If the value is a dict, convert each element to a dict and add it to the dictionary
        elif isinstance(v, dict):
            valuedict |= _valueclass2dict_dict(v)

        # If the value is a int, float, str, bool, add it to the dictionary
        elif isinstance(v, (int, float, str, bool)):
            valuedict = v

        # If the value is not of one of the above types, raise an error
        else:
            raise TypeError(f&#34;Valueclass2dict does not accept type {type(v)}.&#34;)
    return valuedict</code></pre>
</details>
</dd>
<dt id="dataanalyzer.utilities.data_conversion.valueclass2json"><code class="name flex">
<span>def <span class="ident">valueclass2json</span></span>(<span>parameters: Union[<a title="dataanalyzer.utilities.valueclass.Valueclass" href="valueclass.html#dataanalyzer.utilities.valueclass.Valueclass">Valueclass</a>, list, tuple, dict], results: Union[<a title="dataanalyzer.utilities.valueclass.Valueclass" href="valueclass.html#dataanalyzer.utilities.valueclass.Valueclass">Valueclass</a>, list, tuple, dict], path: str) ‑> NoneType</span>
</code></dt>
<dd>
<div class="desc"><p>Converts a Valueclass object to a json string.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>parameters</code></strong> :&ensp;<code>Union[Valueclass, list, tuple, dict]</code></dt>
<dd>The parameters to be converted.</dd>
<dt><strong><code>results</code></strong> :&ensp;<code>Union[Valueclass, list, tuple, dict]</code></dt>
<dd>The results to be converted.</dd>
<dt><strong><code>path</code></strong> :&ensp;<code>str</code></dt>
<dd>The path to the json file.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def valueclass2json(
    parameters: Union[Valueclass, list, tuple, dict],
    results: Union[Valueclass, list, tuple, dict],
    path: str,
) -&gt; None:
    &#34;&#34;&#34;Converts a Valueclass object to a json string.

    Args:
        parameters (Union[Valueclass, list, tuple, dict]): The parameters to be converted.
        results (Union[Valueclass, list, tuple, dict]): The results to be converted.
        path (str): The path to the json file.
    &#34;&#34;&#34;

    # Convert the parameters and results to a dictionary.
    settings_dict = valueclass2dict(parameters, split_complex=True)
    result_dict = valueclass2dict(results, split_complex=True)

    # Create a dictionary with the experiment settings and results.
    jsondict = {&#34;experiment_settings&#34;: settings_dict, &#34;experiment_results&#34;: result_dict}

    # Add the dictionary to the json file.
    with open(path, &#34;r+&#34;) as file:
        try:
            json_dict = json.load(file)
        except json.decoder.JSONDecodeError:
            json_dict = {}
        json_dict |= jsondict
        file.seek(0)
        json.dump(json_dict, file, indent=4)</code></pre>
</details>
</dd>
<dt id="dataanalyzer.utilities.data_conversion.valueclass2labber"><code class="name flex">
<span>def <span class="ident">valueclass2labber</span></span>(<span>parameters: list[<a title="dataanalyzer.utilities.valueclass.Valueclass" href="valueclass.html#dataanalyzer.utilities.valueclass.Valueclass">Valueclass</a>], results: list[<a title="dataanalyzer.utilities.valueclass.Valueclass" href="valueclass.html#dataanalyzer.utilities.valueclass.Valueclass">Valueclass</a>], output_path: str) ‑> str</span>
</code></dt>
<dd>
<div class="desc"><p>Converts a Valueclass object to a Labber file.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>parameters</code></strong> :&ensp;<code>list[Valueclass]</code></dt>
<dd>Valueclass parameters.</dd>
<dt><strong><code>results</code></strong> :&ensp;<code>list[Valueclass]</code></dt>
<dd>Valueclass results.</dd>
<dt><strong><code>output_path</code></strong> :&ensp;<code>str</code></dt>
<dd>The path to the Labber file.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>str</code></dt>
<dd>The path to the Labber file.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def valueclass2labber(
    parameters: list[Valueclass], results: list[Valueclass], output_path: str
) -&gt; str:
    &#34;&#34;&#34;Converts a Valueclass object to a Labber file.

    Args:
        parameters (list[Valueclass]): Valueclass parameters.
        results (list[Valueclass]): Valueclass results.
        output_path (str): The path to the Labber file.

    Returns:
        str: The path to the Labber file.
    &#34;&#34;&#34;
    # Create the Labber dictionaries
    logStep, logLog = _make_labber_dict(parameters, results)

    # Create the Labber file and return the path
    return _make_inital_Labber_file(output_path, logLog, logStep)</code></pre>
</details>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="dataanalyzer.utilities" href="index.html">dataanalyzer.utilities</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="dataanalyzer.utilities.data_conversion.dict2valueclass" href="#dataanalyzer.utilities.data_conversion.dict2valueclass">dict2valueclass</a></code></li>
<li><code><a title="dataanalyzer.utilities.data_conversion.json2labber" href="#dataanalyzer.utilities.data_conversion.json2labber">json2labber</a></code></li>
<li><code><a title="dataanalyzer.utilities.data_conversion.json2valueclass" href="#dataanalyzer.utilities.data_conversion.json2valueclass">json2valueclass</a></code></li>
<li><code><a title="dataanalyzer.utilities.data_conversion.labber2json" href="#dataanalyzer.utilities.data_conversion.labber2json">labber2json</a></code></li>
<li><code><a title="dataanalyzer.utilities.data_conversion.labber2valueclass" href="#dataanalyzer.utilities.data_conversion.labber2valueclass">labber2valueclass</a></code></li>
<li><code><a title="dataanalyzer.utilities.data_conversion.print_values_from_list" href="#dataanalyzer.utilities.data_conversion.print_values_from_list">print_values_from_list</a></code></li>
<li><code><a title="dataanalyzer.utilities.data_conversion.valueclass2dict" href="#dataanalyzer.utilities.data_conversion.valueclass2dict">valueclass2dict</a></code></li>
<li><code><a title="dataanalyzer.utilities.data_conversion.valueclass2json" href="#dataanalyzer.utilities.data_conversion.valueclass2json">valueclass2json</a></code></li>
<li><code><a title="dataanalyzer.utilities.data_conversion.valueclass2labber" href="#dataanalyzer.utilities.data_conversion.valueclass2labber">valueclass2labber</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.2</a>.</p>
</footer>
</body>
</html>